/* ========================================
   RESPONSIVE DESIGN
   Mobile-first approach per design guide
======================================== */

/* Tablet: 768px - 1023px */
@media (max-width: 1023px) {
    .sidebar-right {
        position: absolute;
        right: 0;
        top: var(--header-height);
        height: calc(100vh - var(--header-height));
        z-index: 100;
        background: var(--color-bg-secondary);
        transform: translateX(100%);
        transition: transform var(--transition-base);
    }

    .sidebar-right.active {
        transform: translateX(0);
    }

    /* Reduce sidebar width slightly */
    :root {
        --sidebar-width: 280px;
        --info-panel-width: 320px;
    }
}

/* Mobile: 320px - 767px */
@media (max-width: 767px) {
    :root {
        /* Mobile spacing adjustments */
        --sidebar-width: 100%;
        --info-panel-width: 100%;
        --header-height: 56px;
        --compose-height: 140px;
        --spacing-md: 12px;
        --spacing-lg: 16px;

        /* Slightly larger fonts for readability */
        --font-size-sm: 13px;
        --font-size-base: 14px;
        --font-size-lg: 16px;
    }

    /* Show hamburger menu */
    .hamburger-menu {
        display: flex;
    }

    /* Header adjustments */
    .header {
        padding: 0 var(--spacing-sm);
    }

    .header-logo {
        font-size: var(--font-size-base);
        letter-spacing: 1px;
    }

    .header-user {
        font-size: var(--font-size-xs);
        padding: 4px 8px;
    }

    .network-status {
        font-size: var(--font-size-xs);
        padding: 4px 8px;
    }

    /* Hide corner brackets on mobile for cleaner look */
    .header::before,
    .header::after {
        display: none;
    }

    /* Sidebar as overlay */
    .sidebar-left {
        position: fixed;
        left: 0;
        top: var(--header-height);
        height: calc(100vh - var(--header-height));
        z-index: 200;
        transform: translateX(-100%);
        transition: transform var(--transition-base);
        box-shadow: 4px 0 12px rgba(0, 255, 65, 0.1);
    }

    .sidebar-left.active {
        transform: translateX(0);
    }

    /* Info panel as overlay */
    .sidebar-right {
        position: fixed;
        right: 0;
        top: var(--header-height);
        height: calc(100vh - var(--header-height));
        z-index: 200;
        transform: translateX(100%);
        transition: transform var(--transition-base);
        box-shadow: -4px 0 12px rgba(0, 255, 65, 0.1);
    }

    .sidebar-right.active {
        transform: translateX(0);
    }

    /* Main content full width on mobile */
    .main-content {
        width: 100%;
    }

    .thread-panel {
        width: 100%;
    }

    /* Touch-friendly buttons (44px minimum) */
    .btn {
        min-height: 44px;
        padding: 12px 20px;
        font-size: var(--font-size-base);
    }

    .btn-icon {
        min-width: 44px;
        min-height: 44px;
        padding: 10px;
    }

    /* Touch-friendly conversation items */
    .conversation-item {
        padding: 16px 12px;
        min-height: 72px;
    }

    /* Larger touch targets for contact actions */
    .info-actions .btn {
        padding: 14px 16px;
        width: 100%;
        margin-bottom: 8px;
    }

    /* Input fields touch-friendly */
    .search-input {
        padding: 12px;
        font-size: var(--font-size-base);
        min-height: 44px;
    }

    /* Compose area optimizations */
    .compose-input {
        font-size: var(--font-size-base);
        padding: 12px;
        min-height: 80px;
    }

    .compose-actions {
        padding: 10px 12px;
        flex-wrap: wrap;
    }

    .compose-actions .btn {
        flex: 1;
        min-width: 120px;
    }

    /* Modal optimizations */
    .modal {
        width: 95%;
        max-width: 100%;
        max-height: 90vh;
        margin: var(--spacing-sm);
    }

    .modal-header {
        font-size: var(--font-size-lg);
        padding: 12px;
    }

    .modal-content {
        padding: 12px;
    }

    .modal-actions {
        padding: 12px;
        flex-direction: column;
        gap: 8px;
    }

    .modal-actions .btn {
        width: 100%;
    }

    /* Form inputs in modals */
    .modal input,
    .modal textarea,
    .modal select {
        font-size: var(--font-size-base);
        padding: 12px;
        min-height: 44px;
    }

    .modal textarea {
        min-height: 100px;
    }

    /* Thread header mobile */
    .thread-header {
        padding: 10px 12px;
        flex-wrap: wrap;
    }

    .thread-title {
        font-size: var(--font-size-lg);
    }

    .thread-actions {
        gap: 6px;
    }

    /* Messages mobile */
    .messages-container {
        padding: 12px 8px;
    }

    .message {
        max-width: 85%;
        padding: 10px 12px;
    }

    .message-text {
        font-size: var(--font-size-base);
        word-break: break-word;
    }

    /* Info panel sections */
    .info-section {
        padding: 12px;
    }

    .info-section-title {
        font-size: var(--font-size-base);
    }

    /* Status indicators larger */
    .status-indicator {
        width: 10px;
        height: 10px;
    }

    /* Notifications mobile */
    .notification {
        top: calc(var(--header-height) + 8px);
        right: 8px;
        left: 8px;
        min-width: auto;
        max-width: calc(100% - 16px);
    }

    /* Empty state mobile */
    .empty-state {
        padding: var(--spacing-lg);
        font-size: var(--font-size-sm);
    }

    /* Reduce corner bracket sizes on mobile */
    .modal::before,
    .modal::after {
        width: 12px;
        height: 12px;
    }
}

/* Small Mobile: 320px - 480px */
@media (max-width: 480px) {
    :root {
        --header-height: 52px;
        --spacing-sm: 6px;
        --font-size-xs: 11px;
        --font-size-sm: 12px;
    }

    .header-logo {
        font-size: var(--font-size-sm);
    }

    .header-user span {
        display: none; /* Hide username text, show only status dot */
    }

    .network-status span:not(.status-indicator) {
        display: none; /* Show only status indicator */
    }

    .conversation-item {
        padding: 12px 8px;
    }

    .message {
        max-width: 90%;
        padding: 8px 10px;
        font-size: var(--font-size-sm);
    }
}

/* Landscape mobile optimization */
@media (max-width: 767px) and (orientation: landscape) {
    :root {
        --header-height: 48px;
        --compose-height: 100px;
    }

    .compose-input {
        min-height: 60px;
    }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}
